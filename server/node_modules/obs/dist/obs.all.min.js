/*! sublish 0.4.5 Original author Alan Plum <me@pluma.io>. Released into the Public Domain under the UNLICENSE. @preserve */
(function(t){var r=function(r){return t[r]},i=t.sublish={};function e(){this._subscribers=[]}e.prototype={subscribe:function(t){this._subscribers.push(t)},unsubscribe:function(t){for(var r=0;r<this._subscribers.length;r++){if(this._subscribers[r]===t){this._subscribers.splice(r,1);return true}}return false},publish:function(){var t=Array.prototype.slice.call(arguments,0);for(var r=0;r<this._subscribers.length;r++){this._subscribers[r].apply(this,t)}}};i.PubSub=e})(this);/*! obs 0.11.2 Original author Alan Plum <me@pluma.io>. Released into the Public Domain under the UNLICENSE. @preserve */
(function(t){var r=function(r){return t[r]},i={};var e=r("sublish").PubSub,n=Array.prototype.slice,u=Array.isArray?Array.isArray:function(t){return Object.prototype.toString.call(t)==="[object Array]"},s=Array.prototype.indexOf?function(t,r){return!!~t.indexOf(r)}:function(t,r){for(var i=0;i<t.length;i++){if(t[i]===r){return true}}return false};function o(t){var r=n.call(arguments,1);for(var i=0;i<r.length;i++){var e=r[i];for(var u in e){if(e.hasOwnProperty(u)){t[u]=e[u]}}}return t}function c(t){var r=t[0];if(typeof r==="function"){r={compute:t[0]};if(t.length>1){if(typeof t[1]==="function"){r.write=t[1];if(t.length>2){r.watch=t[2]}}else{r.watch=t[1]}}}return r}function a(t){function r(t){if(arguments.length){if(typeof r.write==="function"){r.write.call(r.context,t)}else{throw new Error("This observable cannot be written to!")}}else{if(typeof r.read==="function"){return r.read.call(r.context)}else{throw new Error("This observable cannot be read from!")}}}o(r,e.prototype,{context:t.context||r,read:t.read,write:t.write,onNotify:function(t){return function(){t.call(r)}}(t.onNotify||function(){}),_initialValue:t.value,_currentValue:t.value,_previousValue:undefined,_subscriptions:[]},a.fn);e.apply(r);if(t.watch){r.watch.apply(r,u(t.watch)?t.watch:[t.watch])}return r}a.fn={__is_obs__:true,notify:function(){this.dirty=this._currentValue===this._initialValue;this.publish(this._currentValue,this._previousValue)},peek:function(){return this._currentValue},commit:function(){this._initialValue=this._currentValue;this.dirty=false},reset:function(){this._previousValue=this._currentValue;this._currentValue=this._initialValue;this.notify()},watch:function(){var t=n.call(arguments,0),r,i;for(i=0;i<t.length;i++){r=t[i];if(s(this._subscriptions,r)){continue}if(r&&typeof r.subscribe==="function"){r.subscribe(this.onNotify);this._subscriptions.push(r)}}return this},unwatch:function(){var t=n.call(arguments,0),r=this._subscriptions,i,e;for(i=0;i<t.length;i++){e=t[i];if(e&&typeof e.unsubscribe==="function"){e.unsubscribe(this.onNotify)}}this._subscriptions=[];for(i=0;i<r.length;i++){e=r[i];if(!s(t,e)){this._subscriptions.push(e)}}return this},dismiss:function(){this.unwatch.apply(this,this._subscriptions)}};a.prop=function(t){return a({read:function(){return this._currentValue},write:function(t){this._previousValue=this._currentValue;this._currentValue=t;this.notify()},value:t})};a.computed=function(t){t=c(arguments);var r=a(o({},t,{read:function(){return r._currentValue},onNotify:function(){this._previousValue=this._currentValue;this._currentValue=t.compute.call(this.context);this.notify()}}));if(t.compute){r._initialValue=t.compute.call(r.context);r._currentValue=r._initialValue}if(t.watch){r.watch.apply(r,u(t.watch)?t.watch:[t.watch])}return r};a.computed.lazy=function(t){t=c(arguments);var r=true;var i=a(o({},t,{context:t.context,read:function(){if(r){r=false;i._previousValue=i._currentValue;i._currentValue=t.compute.call(this);i.notify()}return i._currentValue},write:t.write,onNotify:function(){r=true},watch:t.watch}));return i};i.exports=a;t.obs=i.exports})(this);